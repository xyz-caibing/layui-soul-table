/**
 *
 * @name:  基于soulTable开源代码-表格增强插件-独立版本分支
 * @author: caibing(菜饼)
 * @link: https://github.com/xyz-caibing/layui-soul-table.git
 * @license: MIT
 * @version: v1.6.2.2
 */
layui.define(["table"],function(exports){var $=layui.$,table=layui.table,HIDE="layui-hide",tables={},cacheWhere=[],originData=[],originCols={},tableOptions=[];defaultConfig={adaptTableHeight:!0,lineSerachBox:!0,lineColor:!0,operandFlexBar:!1,fixTotal:!0,drag:{type:"simple",toolbar:!1},rowDrag:!1,autoColumnWidth:{init:!0,cache:!0},contextmenu:{header:[{name:"左固定",icon:"layui-icon layui-icon-align-left",click:function(e){mod.fixedChoose(this,e.elem,"left")}},{name:"取消固定",icon:"layui-icon layui-icon-align-center",click:function(e){mod.fixedChoose(this,e.elem,"none")}}]},fixResize:!1,overflow:!1,fixFixedScroll:!0,filter:{items:["column"],cache:!0}},_BODY=$("body"),_DOC=$(document);var mod={updateOriginDataBy(e,t,i,a=[]){let l=originData[e],n;for(let e=0;e<l.length;e++)if(l[e][t]==i){n=l.splice(e,1);break}if(l.sort(function(e,t){return t.CreateTime<e.CreateTime?-1:1}),n){let t=n[0];a.forEach(e=>{t[e.key]=e.value}),l.unshift(t);for(let e=0;e<l.length;e++)l[e].LAY_TABLE_INDEX=e}},getCurCols:function(e){e=location.pathname+location.hash+e,e=sessionStorage.getItem(e);return!!e&&this.deepParse(e)},reCols:function(e){var t=$(e.elem),i=t.next().children(".layui-table-box"),a=i.children(".layui-table-fixed-l").children(".layui-table-header").children("table"),i=i.children(".layui-table-fixed-l").children(".layui-table-body").children("table"),t=t.next().children(".layui-table-total").children("table.layui-table-total-fixed-l");let l=[];layui.each(e.cols[0],function(e,t){"left"==t.fixed&&(l[t.field||e]=t.fixed)}),a.find("th").each(function(){var e=$(this).attr("data-field");l[e]||$(this).remove()}),t.find("td").each(function(){var e=$(this).attr("data-field");l[e]||$(this).remove()}),i.find("td").each(function(){var e=$(this).attr("data-field");l[e]||$(this).remove()})},render:function(e){this.reCols(e),tables[e.id]=e,tableOptions[e.id]=tableOptions[e.id]||{};var t=$.extend({},defaultConfig,e);t.filter&&t.filter.cache||this.clearCache(e),e.notReloadData||(originData[e.id]=this.deepClone(e.data),e.notReloadData=!0),originData[e.id]&&originData[e.id].length<=0?($(e.elem).next().children(".layui-table-total").addClass("layui-hide"),$(e.elem).siblings("#paging").addClass("layui-hide")):($(e.elem).next().children(".layui-table-total").removeClass("layui-hide"),$(e.elem).siblings("#paging").removeClass("layui-hide")),this.suspendConfig[e.id]={drag:!1,rowDrag:!1},t.fixTotal&&this.fixTotal(e),t.drag&&this.drag(e,t.drag),t.rowDrag&&this.rowDrag(e,t.rowDrag),t.totalRow&&this.totalRow(e),!tableOptions[e.id].isAutoColWidth&&t.autoColumnWidth&&(tableOptions[e.id].isAutoColWidth=!0,this.autoColumnWidth(e,t.autoColumnWidth)),t.contextmenu&&this.contextmenu(e,t.contextmenu),t.fixResize&&this.fixResizeRightFixed(e),t.overflow&&this.overflow(e,t.overflow),t.fixFixedScroll&&this.fixFixedScroll(e),t.operandFlexBar&&(t.operandFlexBar.cache=!0,this.operandFlexBar(e,t.operandFlexBar)),t.lineColor&&this.lineColor(e,t.lineColor),t.lineSerachBox&&this.lineSerachBox(e,t.lineSerachBox),t.adaptTableHeight&&this.adaptTableHeight(e)},config:function(e){"object"==typeof e&&$.extend(!0,defaultConfig,e)},updateCols:function(l,n){for(var r,o,e={},t=[],i=[],a=$(l.elem).next().children(".layui-table-box"),d=a.children(".layui-table-fixed").children(".layui-table-header").children("table"),s=$.merge(a.children(".layui-table-header").children("table"),d),c=a.children(".layui-table-header").children("table"),h=a.children(".layui-table-fixed").children(".layui-table-body").children("table"),u=a.children(".layui-table-body").children("table"),f=$.merge(a.children(".layui-table-body").children("table"),h),b=0;b<l.cols.length;b++)for(r=0;r<l.cols[b].length;r++)l.cols[b][r].oldPos=b+"-"+r,e[l.cols[b][r].key]=l.cols[b][r];for(b=0;b<n.length;b++){for(i=[],r=0;r<n[b].length;r++){if(o=l.index+"-"+n[b][r].key,n[b][r].width&&e[n[b][r].key]!==n[b][r].width&&this.getCssRule(l,o,function(e){e.style.width=(n[b][r].width||0)+"px"}),e[n[b][r].key].hide!==n[b][r].hide&&(s.find('th[data-key="'+o+'"]')[n[b][r].hide?"addClass":"removeClass"]("layui-hide"),f.find('td[data-key="'+o+'"]')[n[b][r].hide?"addClass":"removeClass"]("layui-hide")),(e[n[b][r].key].oldPos!==b+"-"+r||e[n[b][r].key].fixed!==n[b][r].fixed)&&n[b][r].fixed!==e[n[b][r].key].fixed)return l.cols=n,void table.reload(l.id);e[n[b][r].key].fixed=n[b][r].fixed,e[n[b][r].key].width=n[b][r].width,e[n[b][r].key].hide=n[b][r].hide,i.push(e[n[b][r].key])}t.push(i)}function y(e,t){for(b=0;b<n.length;b++)for(r=0;r<n[b].length;r++){o=l.index+"-"+n[b][r].key;var i,a=$(e).children(t+":eq("+r+")").attr("data-key");a!==o&&($(e).children(t+":eq("+r+")").before($(e).children(t+'[data-key="'+o+'"]')),n[b][r].fixed&&(i=("th"===t?d:h).children().children("th"===t?"tr":'tr[data-index="'+$(e).attr("data-index")+'"]')).children(t+'[data-key="'+a+'"]').before(i.children(t+'[data-key="'+o+'"]')))}}c.children().children("tr").each(function(){y(this,"th")}),u.children().children("tr").each(function(){y(this,"td")}),l.cols=t,table.resize(l.id)},getCssRule:function(e,i,a){e=e.elem.next().find("style")[0],e=e.sheet||e.styleSheet||{},e=e.cssRules||e.rules;layui.each(e,function(e,t){if(t.selectorText===".laytable-cell-"+i)return a(t),!0})},autoColumnWidth:function(e,n){var t=this;if(originData[e.id]&&originData[e.id].length<=0)return console.log("table.data is empty, No Execute autoColumnWidth"),void(tableOptions[e.id].isAutoColWidth=!1);function i(c,i){var e=$(i.elem),t=e.next().children(".layui-table-box").children(".layui-table-header").children("table").children("thead").children("tr").children("th"),a=e.next().children(".layui-table-box").children(".layui-table-fixed").children(".layui-table-header").children("table").children("thead").children("tr").children("th"),h=e.next().children(".layui-table-box").children(".layui-table-body").children("table").children("tbody").children("tr"),u=e.next().children(".layui-table-total").find("tr");function l(e,t,i){var a=t.data("key"),l=a.split("-"),n=3===l.length?l[1]+"-"+l[2]:"";if(!(1<t.attr("colspan")||t.data("unresize"))&&i){var r=t.text().width(t.css("font"))+21,o=t.css("font");h.children('td[data-key="'+a+'"]').each(function(e,t){var i=0;$(this).children().children()&&0<$(this).children().children().length?i+=$(this).children().html().width(o):i=$(this).text().width(o),300<=i?r=300:r<i&&(r=i)}),0<u.length&&(t=u.children('td[data-key="'+a+'"]').text().width(o),r<t&&(r=t)),r+=32,c.getCssRule(e,a,function(e){e.style.width=r+"px"});for(var d=0;d<e.cols.length;d++)for(var s=0;s<e.cols[d].length;s++)if(e.cols[d][s].key===n){e.cols[d][s].width=r;break}}}String.prototype.width=function(e){var t=e||_BODY.css("font"),e=$("<div>"+this+"</div>").css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:t}).appendTo(_BODY),t=e.width();return e.remove(),Math.ceil(t)||0},void 0!==n&&void 0!==n.dblclick&&!n.dblclick||t.add(a).on("dblclick",function(e){var t=$(this),e=e.clientX-t.offset().left;l(i,t,0<t.parents(".layui-table-fixed-r").length?e<=10:t.width()-e<=10)}),n&&n.init&&(t.add(a).each(function(e){var t=$(this).attr("data-key").split("-");!1===i.cols[t[1]][t[2]].autoWidth||Array.isArray(n.init)&&-1===n.init.indexOf($(this).attr("data-field"))||l(i,$(this),!0)}),n.cache&&c.fixTableRememberToSession(i))}"object"==typeof e?i(t,e):"string"==typeof e?i(t,tables[e]):void 0===e&&layui.each(tables,function(){i(t,this)})},drag:function(D,e){var N,t,S,i,O,s,T,R,_,c,W,I,B,F,Y,z;1<D.cols.length||(N=this,t=$(D.elem),S=t.next().children(".layui-table-box"),i=$.merge(S.children(".layui-table-header").children("table"),S.children(".layui-table-fixed").children(".layui-table-header").children("table")),O=S.children(".layui-table-fixed").children(".layui-table-body").children("table"),s=S.children(".layui-table-body").children("table"),T=$.merge(S.children(".layui-table-body").children("table"),O),R=t.next().children(".layui-table-total").children("table"),_=t.next().children(".layui-table-total").children("table.layui-table-total-fixed"),c=t.next().children(".layui-table-total").children("table:eq(0)"),W=D.id,I="simple"===e||e&&"simple"===e.type,B=e&&e.toolbar,Y=F=!1,i.attr("drag")||(i.attr("drag",!0),B&&(S.append('<div class="soul-drag-bar"><div data-type="left">左固定</div><div data-type="none">不固定</div><div data-type="right">右固定</div></div>'),(z=S.children(".soul-drag-bar")).children("div").on("mouseenter",function(){$(this).addClass("active")}).on("mouseleave",function(){$(this).removeClass("active")})),i.find("th").each(function(){var e,d,g,m,k=$(this),C=k.data("field"),w=k.data("key");w&&isNaN(C)&&(e=w.split("-"),d=D.cols[e[1]][e[2]],g=e[1]+"-"+e[2],m=0<k.parents(".layui-table-fixed").length,$(this).find("span:first,.laytable-cell-checkbox").css("cursor","move").on("mousedown",function(e){var b,t,y,p,x,o,v;N.suspendConfig[W].drag||0!==e.button||(e.preventDefault(),b=k.clone().css("visibility","hidden"),t=k.position().left,k.offset().top,y=e.clientX-t,p=k.parents("tr:eq(0)").css("background-color"),x=k.width(),o=$(this),v=d.fixed,Y=!0,_DOC.bind("selectstart",function(){return!1}),_BODY.on("mousemove",function(e){if(Y&&b){S.removeClass("no-left-border"),F||(B&&(z.attr("data-type",v||"none"),z.addClass("active")),k.after(b),k.addClass("isDrag").css({position:"absolute","z-index":1,"border-left":"1px solid #e6e6e6","background-color":p,width:x+1}),I||((m?O:T).find('td[data-key="'+w+'"]').each(function(){$(this).after($(this).clone().css("visibility","hidden").attr("data-clone","")),$(this).addClass("isDrag").css({position:"absolute","z-index":1,"border-left":"1px solid #e6e6e6","background-color":$(this).css("background-color"),width:x+1})}),0<R.length&&(m?_:R).find('td[data-key="'+w+'"]').each(function(){$(this).after($(this).clone().css("visibility","hidden").attr("data-clone","")),$(this).addClass("isDrag").css({position:"absolute","z-index":1,"background-color":$(this).parents("tr:eq(0)").css("background-color"),width:x+1})}))),F=!0;var t,i,a,l,n,r=e.clientX-y,o=b.prev().prev(),d=0<o.length,s=d?o.data("key").split("-"):[],c=b.next().hasClass("layui-table-patch")?[]:b.next(),h=0<c.length,e=h?c.data("key").split("-"):[],u=d&&b.position().left-r>o.width()/2,f=h&&r-b.position().left>c.width()/2;if(Math.abs(b.position().left-r),0<b.position().left-r?!d||!!v!=!!D.cols[s[1]][s[2]].fixed:!h||!!v!=!!D.cols[e[1]][e[2]].fixed)return k.css("left",b.position().left),T.find('td[data-key="'+w+'"][data-clone]').each(function(e){$(this).prev().css("left",b.position().left)}),0<R.length&&R.find('td[data-key="'+w+'"][data-clone]').each(function(e){$(this).prev().css("left",b.position().left)}),void S.addClass("no-left-border");if(k.css("left",r),u){for(b.after(o),$("#soul-columns"+W+'>li[data-value="'+C+'"]').after($("#soul-columns"+W+'>li[data-value="'+C+'"]').prev()),a=0;a<D.cols.length;a++){for(l=0;l<D.cols[a].length;l++)if(D.cols[a][l].key===g){t=a,i=l;break}if(void 0!==t&&void 0!==i)break}n=D.cols[t][i-1],D.cols[t][i-1]=D.cols[t][i],D.cols[t][i]=n,N.fixTableRemember(D)}else if(f){for(b.prev().before(c),$("#soul-columns"+W+'>li[data-value="'+C+'"]').before($("#soul-columns"+W+'>li[data-value="'+C+'"]').next()),a=0;a<D.cols.length;a++){for(l=0;l<D.cols[a].length;l++)if(D.cols[a][l].key===g){t=a,i=l;break}if(void 0!==t&&void 0!==i)break}n=D.cols[t][i+1],D.cols[t][i+1]=D.cols[t][i],D.cols[t][i]=n,N.fixTableRemember(D)}T.find('td[data-key="'+w+'"][data-clone]').each(function(){$(this).prev().css("left",r),u?0!==$(this).prev().prev().length&&$(this).after($(this).prev().prev()):f&&0!==$(this).next().length&&$(this).prev().before($(this).next())}),0<R.length&&R.find('td[data-key="'+w+'"][data-clone]').each(function(){$(this).prev().css("left",r),u?0!==$(this).prev().prev().length&&$(this).after($(this).prev().prev()):f&&0!==$(this).next().length&&$(this).prev().before($(this).next())})}}).on("mouseup",function(){if(_DOC.unbind("selectstart"),_BODY.off("mousemove").off("mouseup"),Y&&b)if(Y=!1,F){"checkbox"!==d.type&&o.on("click",function(e){e.stopPropagation()}),F=!1,S.removeClass("no-left-border"),k.removeClass("isDrag").css({position:"relative","z-index":"inherit",left:"inherit","border-left":"inherit",width:"inherit","background-color":"inherit"}),k.next().remove();var e,t=k.prev().data("key");if(v&&(e=S.children(".layui-table-header").children("table").find('th[data-key="'+w+'"]'),t?e.parent().children('th[data-key="'+t+'"]').after(e):"right"===v?0<k.siblings().length&&S.children(".layui-table-header").children("table").find('th[data-key="'+k.next().data("key")+'"]').prev().after(e):(e.parent().prepend('<th class="layui-hide"></th>'),e.parent().children("th:first").after(e),e.parent().children("th:first").remove())),I?(T.find('td[data-key="'+w+'"]').each(function(){var e;t?$(this).parent().children('td[data-key="'+t+'"]').after($(this)):"right"===v?0<k.siblings().length&&(0<(e=$(this).parent().children('td[data-key="'+k.next().data("key")+'"]').prev()).length?e.after($(this)):($(this).parent().prepend('<td class="layui-hide"></td>'),$(this).parent().children("td:first").after($(this)),$(this).parent().children("td:first").remove())):($(this).parent().prepend('<td class="layui-hide"></td>'),$(this).parent().children("td:first").after($(this)),$(this).parent().children("td:first").remove())}),0<R.length&&R.find('td[data-key="'+w+'"]').each(function(){var e;t?$(this).parent().children('td[data-key="'+t+'"]').after($(this)):"right"===v&&0<(e=$(this).parent().children('td[data-key="'+k.next().data("key")+'"]').prev()).length?e.after($(this)):($(this).parent().prepend('<td class="layui-hide"></td>'),$(this).parent().children("td:first").after($(this)),$(this).parent().children("td:first").remove())}),table.reload(W)):m?(s.find('td[data-key="'+w+'"]').each(function(){var e;t?$(this).parent().children('td[data-key="'+t+'"]').after($(this)):"right"===v?0<k.siblings().length&&(0<(e=$(this).parent().children('td[data-key="'+k.next().data("key")+'"]').prev()).length?e.after($(this)):($(this).parent().prepend('<td class="layui-hide"></td>'),$(this).parent().children("td:first").after($(this)),$(this).parent().children("td:first").remove())):($(this).parent().prepend('<td class="layui-hide"></td>'),$(this).parent().children("td:first").after($(this)),$(this).parent().children("td:first").remove())}),O.find('td[data-key="'+w+'"][data-clone]').each(function(){$(this).prev().removeClass("isDrag").css({position:"relative","z-index":"inherit",left:"inherit","border-left":"inherit",width:"inherit","background-color":"inherit"}),$(this).remove()}),0<R.length&&(c.find('td[data-key="'+w+'"]').each(function(){var e;t?$(this).parent().children('td[data-key="'+t+'"]').after($(this)):"right"===v&&0<(e=$(this).parent().children('td[data-key="'+k.next().data("key")+'"]').prev()).length?e.after($(this)):($(this).parent().prepend('<td class="layui-hide"></td>'),$(this).parent().children("td:first").after($(this)),$(this).parent().children("td:first").remove())}),_.find('td[data-key="'+w+'"][data-clone]').each(function(){$(this).prev().removeClass("isDrag").css({position:"relative","z-index":"inherit",left:"inherit",width:"inherit","background-color":"inherit"}),$(this).remove()}))):(T.find('td[data-key="'+w+'"][data-clone]').each(function(){$(this).prev().removeClass("isDrag").css({position:"relative","z-index":"inherit",left:"inherit",width:"inherit","background-color":"inherit"}),$(this).remove()}),0<R.length&&R.find('td[data-key="'+w+'"][data-clone]').each(function(){$(this).prev().removeClass("isDrag").css({position:"relative","z-index":"inherit",left:"inherit",width:"inherit","background-color":"inherit"}),$(this).remove()})),b=null,B){if(0<z.children(".active").length&&z.children(".active").attr("data-type")!==z.attr("data-type")){for(var i,a,l,n=z.children(".active").attr("data-type"),r=0;r<D.cols.length;r++)for(i=0;i<D.cols[r].length;i++)"right"===n||"none"===n&&"right"===z.attr("data-type")?void 0===l&&("right"===D.cols[r][i].fixed?l={x:r,y:i}:i===D.cols[r].length-1&&(l={x:r,y:i+1})):void 0!==l||D.cols[r][i].fixed&&"right"!==D.cols[r][i].fixed||(l={x:r,y:i}),D.cols[r][i].key===g&&(a={x:r,y:i});d.fixed="none"!==n&&n,a.y!==l.y&&(D.cols[a.x].splice(a.y,1),a.y<l.y&&--l.y,D.cols[l.x].splice(l.y,0,d),N.fixTableRemember(D)),table.reload(W)}z.removeClass("active")}}else o.unbind("click")}))}))})))},rowDrag:function(d,b){var y,e,p=this,x=$(d.elem),v=x.next().children(".layui-table-box"),g=v.children(".layui-table-fixed").children(".layui-table-body").children("table"),m=v.children(".layui-table-body").children("table"),t=$.merge(v.children(".layui-table-body").children("table"),g),k=d.id,C=!1,i=b.trigger||"row",w=!1!==b.numbers,D=null,N=0,a="row"===i?t.children("tbody").children("tr"):t.find(i);for("row"!==i&&t.find(i).css("cursor","move"),y=0;y<d.cols.length;y++)for(e=0;e<d.cols[y].length;e++)if("numbers"===d.cols[y][e].type){D=d.index+"-"+y+"-"+e,N=parseInt(m.find('td[data-key="'+D+'"]:first').text());break}a.on("mousedown",function(e){var r,o,s,c,h,u,t,f;p.suspendConfig[k].rowDrag||0!==e.button||(r="row"===i?$(this):$(this).parents("tr:eq(0)"),o=parseInt(r.data("index")),s=m.children("tbody").children("tr[data-index="+o+"]"),c=s.clone().css("visibility","hidden"),h=g.children("tbody").children("tr[data-index="+o+"]"),u=v.children(".layui-table-body").scrollTop(),t=r.position().top,f=e.clientY-t,_BODY.on("mousemove",function(e){C||(C=!0,o=(r=x.next().find("style")[0]).sheet||r.styleSheet||{},p.addCSSRule(o,".layui-table-view .layui-table td","cursor: move"),p.addCSSRule(o,".layui-table tr","transition: none"),v.addClass("noselect"),s.after(c),s.css({position:"absolute","z-index":1}),h.each(function(){$(this).after($(this).clone().css("visibility","hidden")),$(this).css({position:"absolute","z-index":102})}));var t=e.clientY-f+(v.children(".layui-table-body").scrollTop()-u),i=c.position().top,a=s.prev(),l=0<a.length,n=c.next(),r=0<n.length,o=l&&i-t>a.height()/2,e=r&&t-i>n.height()/2;if(0<i-t?!l:!r)return s.css("top",i),void h.each(function(){$(this).css("top",i)});function d(e,t){t=parseInt(e.data("index"))+t;return e.data("index",t),e.attr("data-index",t),e}s.css("top",t),h.each(function(){$(this).css("top",t)}),o?(d(s,-1),c.after(d(a,1)),h.each(function(){d($(this),-1),$(this).next().after(d($(this).prev(),1))})):e&&(d(s,1).before(d(n,-1)),h.each(function(){d($(this),1),$(this).before(d($(this).next().next(),-1))}))}).on("mouseup",function(e){if(_BODY.off("mousemove").off("mouseup"),C){C=!1,v.removeClass("noselect"),s.css({position:"inherit","z-index":"inherit"}),s.next().remove(),h.each(function(){$(this).css({position:"inherit","z-index":"inherit"}),$(this).next().remove()});var t=x.next().find("style")[0],i=t.sheet||t.styleSheet||{},t=i.cssRules||i.rules;layui.each(t,function(e,t){".layui-table-view .layui-table td"===t.selectorText&&(t.style.cursor="default")});i=r.index();if(i!==o){var a=table.cache[k],t=a.splice(o,1)[0];if(a.splice(i,0,t),D&&w){var l=[i,o].sort();for(y=l[0];y<=l[1];y++){var n=N+y;g.find('td[data-key="'+D+'"]:eq('+y+")").children().html(n),m.find('td[data-key="'+D+'"]:eq('+y+")").children().html(n),a[y][table.config.indexName]=n-1}}"function"==typeof b.done&&b.done.call(d,{row:t,newIndex:i,oldIndex:o,cache:a})}}}))})},fixTableRemember:function(e,t){if(void 0===e.filter?defaultConfig.filter&&defaultConfig.filter.cache:e.filter.cache){if(t&&t.rule)for(var i=t.rule.selectorText.split("-")[3]+"-"+t.rule.selectorText.split("-")[4],a=0;a<e.cols.length;a++)for(var l=0;l<e.cols[a].length;l++)if(e.cols[a][l].key===i){e.cols[a][l].width=t.rule.style.width.replace("px","");break}var n=location.pathname+location.hash+e.id;localStorage.setItem(n,this.deepStringify(e.cols))}},fixTableRememberToSession:function(e,t){if(void 0===e.filter?defaultConfig.filter&&defaultConfig.filter.cache:e.filter.cache){if(t&&t.rule)for(var i=t.rule.selectorText.split("-")[3]+"-"+t.rule.selectorText.split("-")[4],a=0;a<e.cols.length;a++)for(var l=0;l<e.cols[a].length;l++)if(e.cols[a][l].key===i){e.cols[a][l].width=t.rule.style.width.replace("px","");break}var n=location.pathname+location.hash+e.id;sessionStorage.setItem(n,this.deepStringify(e.cols))}},clearCache:function(e){e&&(e="object"==typeof e?(void 0!==e.config?e.config:e).id:e,localStorage.removeItem(location.pathname+location.hash+e),originCols[e]&&this.updateCols(tables[e],this.deepClone(originCols[e])))},overflow:function(e,t){var i={};if("string"==typeof t)i={type:t};else{if("object"!=typeof t)return;i=t}var n,r,a=$(e.elem),t=a.next().find(".layui-table-header"),e=a.next().find(".layui-table-body"),a=a.next().find(".layui-table-total"),l=i.hoverTime||0,o=i.color||"white",d=i.bgColor||"black",s=i.minWidth||300,c=i.maxWidth||300;function h(e){clearTimeout(r);var t=$(this),i=t.children(".layui-table-cell"),a=i.outerWidth(),l=a<s?s:c<a?c:a;t.data("off")||(e?layer.close(n):i.prop("scrollWidth")>a&&(n=layer.tips('<span style="color: '+o+'">'+$(this).text()+"</span>",this,{tips:[1,d],maxWidth:l,time:0})))}"tips"===i.type?(e.off("mouseenter","td").off("mouseleave","td").on("mouseenter","td",function(){var e=this;r=setTimeout(function(){h.call(e)},l)}).on("mouseleave","td",function(){h.call(this,"hide")}),i.header&&t.off("mouseenter","th").off("mouseleave","th").on("mouseenter","th",function(){var e=this;r=setTimeout(function(){h.call(e)},l)}).on("mouseleave","th",function(){h.call(this,"hide")}),i.total&&a.off("mouseenter","td").off("mouseleave","td").on("mouseenter","td",function(){var e=this;r=setTimeout(function(){h.call(e)},l)}).on("mouseleave","td",function(){h.call(this,"hide")})):"title"===i.type&&(e.off("mouseenter","td").on("mouseenter","td",function(){var e=$(this),t=e.children(".layui-table-cell");e.data("off")||t.prop("scrollWidth")>t.outerWidth()&&t.attr("title",$(this).text())}),i.header&&t.off("mouseenter","th").on("mouseenter","th",function(){var e=$(this),t=e.children(".layui-table-cell");e.data("off")||t.prop("scrollWidth")>t.outerWidth()&&t.attr("title",$(this).text())}),i.total&&a.off("mouseenter","td").on("mouseenter","td",function(){var e=$(this),t=e.children(".layui-table-cell");e.data("off")||t.prop("scrollWidth")>t.outerWidth()&&t.attr("title",$(this).text())}))},contextmenu:function(h,e){for(var t=$(h.elem),i=t.next().children(".layui-table-box"),a=$.merge(i.children(".layui-table-header").children("table"),i.children(".layui-table-fixed-l").children(".layui-table-header").children("table")),l=i.children(".layui-table-fixed").children(".layui-table-body").children("table"),l=$.merge(i.children(".layui-table-body").children("table"),l),t=t.next().children(".layui-table-total").children("table"),u=h.id,n={header:{box:a,tag:"th",opts:e?e.header:"",cols:{}},body:{box:l,tag:"td",opts:e?e.body:"",cols:{},isBody:!0},total:{box:t,tag:"td",opts:e?e.total:"",cols:{}}},r=!1,o=0;o<h.cols.length;o++)for(var d=0;d<h.cols[o].length;d++)h.cols[o][d].contextmenu&&(r=!0,n.header.cols[h.cols[o][d].key]=h.cols[o][d].contextmenu.header,n.body.cols[h.cols[o][d].key]=h.cols[o][d].contextmenu.body,n.total.cols[h.cols[o][d].key]=h.cols[o][d].contextmenu.total);if(e||r){for(var s in n)!function(i){n[i].box.find(n[i].tag).on("contextmenu",function(e){$("#soul-table-contextmenu-wrapper").remove(),_BODY.append('<div id="soul-table-contextmenu-wrapper"></div>'),$("#soul-table-contextmenu-wrapper").on("click",function(e){e.stopPropagation()});var t=n[i].cols[$(this).data("key").substr($(this).data("key").indexOf("-")+1)];return!1!==t&&(t&&0<t.length?(f($("#soul-table-contextmenu-wrapper"),e.pageX,e.pageY,t,$(this),n[i].box,n[i].tag,n[i].isBody),!1):!1!==n[i].opts&&(n[i].opts&&0<n[i].opts.length?(f($("#soul-table-contextmenu-wrapper"),e.pageX,e.pageY,n[i].opts,$(this),n[i].box,n[i].tag,n[i].isBody),!1):void 0))})}(s);_BODY.on("click",function(){$("#soul-table-contextmenu-wrapper").remove()})}function f(e,t,i,a,r,o,d,s){var l,n=[];for(n.push('<ul class="soul-table-contextmenu">'),l=0;l<a.length;l++)n.push('<li data-index="'+l+'" class="'+(a[l].children&&0<a[l].children.length?"contextmenu-children":"")+'">'),a[l].icon?n.push('<i class="prefixIcon '+a[l].icon+'" />'):n.push('<i class="prefixIcon" />'),n.push(a[l].name),a[l].children&&0<a[l].children.length&&n.push('<i class="endIcon layui-icon layui-icon-right" />'),n.push("</li>");n.push("</ul>"),e.append(n.join(""));var c=e.children().last();for(i+c.outerHeight()>_BODY.prop("scrollHeight")&&(i-=c.outerHeight())<0&&(i=0),"left"===e.parent().data("direction")&&0<e.offset().left-c.outerWidth()?(t=-c.outerWidth(),c.data("direction","left")):t+c.outerWidth()+e.offset().left>_BODY.prop("scrollWidth")&&((t=t-c.outerWidth()-e.outerWidth())+e.offset().left<0&&(t=-e.offset().left),c.data("direction","left")),c.css({top:i+"px",left:t+"px"}),l=0;l<a.length;l++)"function"==typeof a[l].click&&function(t){e.children(".soul-table-contextmenu:last").children('li[data-index="'+t+'"]').on("click",function(){var e=r.parents("tr:eq(0)").data("index"),l=o.find('tr[data-index="'+e+'"]'),n=layui.table.cache[u][e];a[t].click.call(h,{cell:r,elem:"th"===d?r:s?o.children("tbody").children('tr[data-index="'+e+'"]').children('[data-key="'+r.data("key")+'"]'):o.find('[data-key="'+r.data("key")+'"]'),trElem:o.children("tbody").children('tr[data-index="'+e+'"]'),text:r.text(),field:r.data("field"),del:s?function(){table.cache[u][e]=[],l.remove(),table.resize(u)}:"",update:s?function(e){e=e||{},layui.each(e,function(i,e){var a,t;i in n&&(t=l.children('td[data-field="'+i+'"]'),n[i]=e,table.eachCols(u,function(e,t){t.field==i&&t.templet&&(a=t.templet)}),t.children(".layui-table-cell").html(a?"function"==typeof a?a(n):layui.laytpl($(a).html()||e).render(n):e),t.data("content",e))})}:"",row:s?n:{}}),$("#soul-table-contextmenu-wrapper").remove()})}(l);e.children(".soul-table-contextmenu:last").children("li").on("mouseenter",function(e){e.stopPropagation(),$(this).siblings(".contextmenu-children").children("ul").remove(),$(this).hasClass("contextmenu-children")&&f($(this),$(this).outerWidth(),$(this).position().top,a[$(this).data("index")].children,r,o,d,s)})}},fixTotal:function(i){var a=$(i.elem),l=a.next().children(".layui-table-total"),n=a.next().find("style")[0],r=n.sheet||n.styleSheet||{};if(0<l.length){var i=a.next().children(".layui-table-box"),n=i.children(".layui-table-fixed-l").children(".layui-table-body").children("table").children("tbody").children("tr:eq(0)").children("td"),i=i.children(".layui-table-fixed-r").children(".layui-table-body").children("table").children("tbody").children("tr:eq(0)").children("td"),o=[];l.children(".layui-table-total-fixed").remove();let e=-7,t=a.next().children(".layui-table-tool").children(".layui-table-tool-temp").children(".layui-btn-container").html();null!=t&&""!=t.trim()||(e=3),0<n.length&&(this.addCSSRule(r,".layui-table-total-fixed-l .layui-table-patch","display: none"),a.next().css("position","relative"),o.push('<table style="position: absolute;background-color: #fff;left: 0;bottom: '+e+'px" cellspacing="0" cellpadding="0" border="0" class="layui-table layui-table-total-fixed layui-table-total-fixed-l"><tbody><tr>'),n.each(function(){$(this).data("key")&&o.push(l.children("table:eq(0)").find('[data-key="'+$(this).data("key")+'"]').prop("outerHTML"))}),o.push("</tr></tbody></table>"),l.append(o.join(""))),0<i.length&&(this.addCSSRule(r,".layui-table-total-fixed-r td:first-child","border-left:1px solid #e6e6e6"),this.addCSSRule(r,".layui-table-total-fixed-r td:last-child","border-left: none"),a.next().css("position","relative"),(o=[]).push('<table style="position: absolute;background-color: #fff;right: 0;bottom: '+e+'px" cellspacing="0" cellpadding="0" border="0" class="layui-table layui-table-total-fixed layui-table-total-fixed-r"><tbody><tr>'),i.each(function(){o.push(l.children("table:eq(0)").find('[data-key="'+$(this).data("key")+'"]').prop("outerHTML"))}),o.push("</tr></tbody></table>"),l.append(o.join("")))}},fixResizeRightFixed:function(a){var t,l=this,e=$(a.elem).next().children(".layui-table-box").children(".layui-table-fixed-r").children(".layui-table-header").children("table"),n={},r="layui-table-sort",o="layui-table-sort-invalid";0<e.length&&(e.find("th").off("mousemove").on("mousemove",function(e){var t=$(this),i=t.offset().left,i=e.clientX-i;t.data("unresize")||n.resizeStart||(t.width()-i<=10&&_BODY.css("cursor","initial"),n.allowResize=i<=10,_BODY.css("cursor",n.allowResize?"col-resize":""))}).off("mousedown").on("mousedown",function(e){var t,i=$(this);n.allowResize&&(i.find("."+r).removeClass(r).addClass(o),t=i.data("key"),e.preventDefault(),n.resizeStart=!0,n.offset=[e.clientX,e.clientY],l.getCssRule(a,t,function(e){var t=e.style.width||i.outerWidth();n.rule=e,n.ruleWidth=parseFloat(t),n.othis=i,n.minWidth=i.data("minwidth")||a.cellMinWidth}))}),_DOC.on("mousemove",function(e){n.resizeStart&&(layui.soulTable.fixTableRemember(a,n),e.preventDefault(),n.rule&&((e=n.ruleWidth-e.clientX+n.offset[0])<n.minWidth&&(e=n.minWidth),n.rule.style.width=e+"px"),t=1)}).on("mouseup",function(e){n.resizeStart&&setTimeout(function(){n.othis.find("."+o).removeClass(o).addClass(r),_BODY.css("cursor",""),n={},l.scrollPatch(a)},30),2===t&&(t=null)}))},fixFixedScroll:function(e){var t=$(e.elem),e=t.next().children(".layui-table-box").children(".layui-table-fixed"),i=t.next().children(".layui-table-box").children(".layui-table-main");e.on("mouseenter",function(){$(this).children(".layui-table-body").addClass("soul-fixed-scroll").on("scroll",function(){var e=$(this).scrollTop();i.scrollTop(e)})}).on("mouseleave",function(){$(this).children(".layui-table-body").removeClass("soul-fixed-scroll").off("scroll")})},scrollPatch:function(e){var t=$(e.elem),i=t.next().children(".layui-table-box").children(".layui-table-header"),a=t.next().children(".layui-table-total"),l=t.next().children(".layui-table-box").children(".layui-table-main"),n=t.next().children(".layui-table-box").children(".layui-table-fixed"),e=t.next().children(".layui-table-box").children(".layui-table-fixed-r");t.next().children(".layui-table-box").children(".layui-table-operand");layMainTable=l.children("table"),scollWidth=l.width()-l.prop("clientWidth"),scollHeight=l.height()-l.prop("clientHeight"),outWidth=layMainTable.outerWidth()-l.width(),addPatch=function(e){var t;scollWidth&&scollHeight?(e=e.eq(0)).find(".layui-table-patch")[0]||((t=$('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>')).find("div").css({width:scollWidth}),e.find("tr").append(t)):e.find(".layui-table-patch").remove()},addPatch(i),addPatch(a);l=l.height()-scollHeight;n.find(".layui-table-body").css("height",layMainTable.height()>=l?l:"auto"),e[0<outWidth?"removeClass":"addClass"](HIDE),e.css("right",scollWidth-1)},copy:function(e){var t;e?((t=document.createElement("div")).id="tempTarget",t.style.opacity="0",t.innerText=e,document.body.appendChild(t)):t=document.querySelector("#"+id);try{var i=document.createRange();i.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(i),document.execCommand("copy"),window.getSelection().removeAllRanges()}catch(e){console.log("复制失败")}e&&t.parentElement.removeChild(t)},addCSSRule:function(e,t,i,a){"insertRule"in e?e.insertRule(t+"{"+i+"}",a):"addRule"in e&&e.addRule(t,i,a)},deepStringify:function(e){var i="[[JSON_FUN_PREFIX_",a="_JSON_FUN_SUFFIX]]";return JSON.stringify(e,function(e,t){return"function"==typeof t?i+t.toString()+a:t})},deepParse:function(str){var JSON_SERIALIZE_FIX={PREFIX:"[[JSON_FUN_PREFIX_",SUFFIX:"_JSON_FUN_SUFFIX]]"};return JSON.parse(str,function(key,value){return"string"==typeof value&&0<value.indexOf(JSON_SERIALIZE_FIX.SUFFIX)&&0===value.indexOf(JSON_SERIALIZE_FIX.PREFIX)?eval("("+value.replace(JSON_SERIALIZE_FIX.PREFIX,"").replace(JSON_SERIALIZE_FIX.SUFFIX,"")+")"):value})||{}},deepClone:function(e){var t=Array.isArray(e)?[]:null!=e&&"object"==typeof e?{}:"";if(e&&"object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e&&"object"==typeof e[i]?this.deepClone(e[i]):e[i]);return t},clearOriginCols:function(e){e?delete originCols[e]:originCols={}},suspendConfig:{},suspend:function(e,t,i){this.suspendConfig[e][t]=i},operandFlexBar:function(e,o){originData[e.id]&&originData[e.id].length<=0?console.log("table.data is empty, No Execute operandFlexBar"):function(e,t,i){let a=$(t.elem).next().children(".layui-table-box"),l=$(t.elem).next().children(".layui-table-total");if(!a.children(".layui-table-fixed-r").hasClass("layui-table-fixed-r"))return;let n=$(['<div class="layui-table-operand" status="" title="收缩栏" lay-event="LAYTABLE_OPERAND_TOOL">','<div class="layui-table-operand-panel">','<div class="layui-table-operand-btn-next" title="收缩">','<i class="layui-icon layui-icon-next"></i>',"</div>",'<div class="layui-table-operand-btn-prev" title="展开" style="display: none;">','<i class="layui-icon layui-icon-prev"></i>',"</div>","</div>","</div>"].join(""));{var r;n.attr("status",o.status),n.find(".layui-table-operand-btn-next").click(function(){return a.children(".layui-table-fixed-r").hide(),l.children(".layui-table-total-fixed-r").hide(),n.attr("status","hide"),n.find(".layui-table-operand-btn-prev").show(),$(this).hide(),o.cache?void e.LocalCache.set(t.id,i,"hide"):(e.LocalCache.del(t.id,i),!1)}),n.find(".layui-table-operand-btn-prev").click(function(){return a.children(".layui-table-fixed-r").show(),l.children(".layui-table-total-fixed-r").show(),n.attr("status","show"),n.find(".layui-table-operand-btn-next").show(),$(this).hide(),o.cache?void e.LocalCache.set(t.id,i,"show"):(e.LocalCache.del(t.id,i),!1)}),a.find(".layui-table-operand").remove(),a.append(n),o.cache?(r=e.LocalCache.get(t.id,i))&&(o.status=r):e.LocalCache.del(t.id,i)}"hide"==o.status?n.find(".layui-table-operand-btn-next").click():"show"==o.status&&n.find(".layui-table-operand-btn-prev").click()}(this,e,"OperandFlexBar")},totalRow:function(e){var t=this;function i(a,e){var t=$(e.elem),i=t.next().children(".layui-table-total").find("div.layui-table-cell"),l={},n={},r={};if(e.data&&e.data.length<=0)i.attr("style","visibility: ;").html("合计");else{for(rowIndex in t.siblings("#paging").show(),layui.each(e.cols,function(e,t){layui.each(t,function(e,t){e=t.field||e;t.totalCol&&(n[e]=e,l[e]=0,r[e]=!1)})}),e.data)for(colIndex in e.data[rowIndex]){var o,d=e.data[rowIndex][colIndex],s=colIndex;n[colIndex]&&null!=d&&(!1===r[s]&&(o=String(d).split(".")[1],r[s]=!!o&&o.length),BigNumber(d).isNaN()||(l[s]=BigNumber(d).plus(l[s])))}$.each(i,function(e,t){var i=$(t).parent().attr("data-field");l[i]&&$(t).html(a.formatNumber(l[i],r[i]))})}}"object"==typeof e?i(t,e):"string"==typeof e?i(t,tables[e]):void 0===e&&layui.each(tables,function(){i(t,this)})},formatNumber:function(e,t=!1){return null==e||""==e?"":(!1===t&&(t=(i=String(e).split(".")[1])?i.length:0),BigNumber.isBigNumber(e)?e.isNaN()?"":e.toFormat(t):BigNumber(e).toFormat(t));var i},lineColor:function(e,t){var i=$(e.elem).next().children(".layui-table-box").find(".layui-table-fixed-l, .layui-table-main");i.find("tbody").children("tr").on("click",function(e){var t=$(this).attr("data-index");$(this).hasClass("line-background")?i.find("tr[data-index="+t+"]").removeClass("line-background"):i.find("tr[data-index="+t+"]").addClass("line-background"),i.find("tr[data-index!="+t+"]").removeClass("line-background")})},fixedChoose:function(e,t,i){if(!(1<e.cols.length)){var a=t.data("key"),l=t.data("field"),t=e.id;if(a&&isNaN(l)){var l=a.split("-"),a=e.cols[l[1]][l[2]],n=l[1]+"-"+l[2];if((!a.fixed||a.fixed!=i)&&(a.fixed||"none"!=i)&&a.field){for(var r,o,d,s=i,c=0;c<e.cols.length;c++)for(r=0;r<e.cols[c].length;r++)"right"===s||"none"===s&&"right"===i?void 0===d&&("right"===e.cols[c][r].fixed?d={x:c,y:r}:r===e.cols[c].length-1&&(d={x:c,y:r+1})):void 0!==d||e.cols[c][r].fixed&&"right"!==e.cols[c][r].fixed||(d={x:c,y:r}),e.cols[c][r].key===n&&(o={x:c,y:r});a.fixed="none"!==s&&s,o.y!==d.y&&(e.cols[o.x].splice(o.y,1),o.y<d.y&&--d.y,e.cols[d.x].splice(d.y,0,a),this.fixTableRemember(e)),table.reload(t)}}}},lineSerachBox:function(u,e){if(originData[u.id]&&originData[u.id].length<=0)console.log("table.data is empty, Do not generate lineSerachBox");else{var f=this,b=$(u.elem),i=b.next().children(".layui-table-box"),a=i.children(".layui-table-header").children("table"),l=i.children(".layui-table-fixed-r").children(".layui-table-body").children("table"),n=i.children(".layui-table-fixed-l").children(".layui-table-body").children("table"),r=i.children(".layui-table-body").children("table"),y=$(['<tr data-index="-1" class="row-serach-box">',"</tr>"].join("")),p=$(['<tr data-index="-1" class="row-serach-box">',"</tr>"].join("")),x=$(['<tr data-index="-1" class="row-serach-box">',"</tr>"].join(""));i.find(".row-serach-box").hasClass("row-serach-box")&&i.find(".row-serach-box").remove();let t=u.page.curr||Number(b.parent().find(".layui-laypage").find(".layui-laypage-curr").text())||1;cacheWhere[u.id]=cacheWhere[u.id]||[],cacheWhere[u.id]=cacheWhere[u.id].filter(function(e){return e.page==t});let c=cacheWhere[u.id]||[],e=a.find("th:first").attr("data-key")||"",h=e.split("-")[0]||t;layui.each(u.cols,function(e,t){layui.each(t,function(e,t){let i=t.field||"",a=t.hide?"layui-hide":"",l=[];layui.each(c,function(e,t){t.field==i&&(l=t.children[0])});let n=['<td data-field="'+i+'" data-key="'+u.index+"-"+t.key+'" class="layui-table-col-special '+a+'">','<div class="layui-table-cell laytable-cell-'+h+"-"+t.key+'">','<input type="text" class="layui-input layui-table-serach" placeholder="请输入..." value="'+(l.value||"")+'">',"</div>","</td>"];!t.field&&!t.checkbox&&"NO."!=t.title||t.checkbox||!t.field&&t.templet?delete n[2]:"NO."==t.title&&(n[2]='<div style="text-align: center;"><i class="layui-icon layui-icon-search"></i></div>');let r=$(n.join("")),o=$(n.join(""));var d=$(n.join(""));$.merge(r.find(".layui-table-serach"),o.find(".layui-table-serach")).focus(function(){$(this).select()});let s=!0;$.merge(r.find(".layui-table-serach"),o.find(".layui-table-serach")).on("compositionstart",function(){s=!1}),$.merge(r.find(".layui-table-serach"),o.find(".layui-table-serach")).on("compositionend",function(){s=!0}),$.merge(r.find(".layui-table-serach"),o.find(".layui-table-serach")).on("input",function(){let t=this;setTimeout(function(){if(s){var e=$(t).val(),n=$(t).parent().parent().data("field");let i={children:[{field:n,groupId:2,id:1,mode:"condition",prefix:"or",type:"contain",value:e}],field:n,head:!0,id:0,mode:"group",prefix:"and",page:u.page.curr||Number(b.parent().find(".layui-laypage").find(".layui-laypage-curr").text())||1},a=!1;layui.each(c,function(e,t){t.field==i.field&&(a=!0,c[e]=i)}),a||cacheWhere[u.id].push(i),f.soulReload(u,c);let l=$(t).parent().attr("class")||"";if(l){let e=l.split(" "),t=[];e.forEach(e=>{t.push("."+e)});n=$('div[lay-id="'+u.id+'"]').find('tr[data-index="-1"]').find(t.join("")).find(".layui-table-serach").val();$('div[lay-id="'+u.id+'"]').find('tr[data-index="-1"]').find(t.join("")).find(".layui-table-serach").val("").focus().val(n)}}},0)}),x.append(r),"left"==t.fixed&&p.append(o),"right"==t.fixed&&y.append(d)})}),r.find("tbody").prepend(x),n.find("tbody").prepend(p),l.find("tbody").prepend(y),$.merge(x,p,y).dblclick(function(e){return!1})}},soulReload:function(e,l){var n,t=$(e.elem),r={};0<l.length&&(n=[],layui.each(originData[e.id],function(e,t){for(var i=!0,a=0;a<l.length;a++)i=function e(t,i,a,l,n){var n=!n&&"or"===t.prefix,r=t.field,o=t.value,d=!0;if(t.children&&0<t.children.length){for(var s=0;s<t.children.length;s++)d=e(t.children[s],i,a,d,0===s);return n?l||d:l&&d}switch(t.mode){case"in":if(!(t.values&&0<t.values.length))return l;if(t.split){for(var c=(i[r]+"").split(t.split),h=!1,s=0;s<c.length;s++)-1!==t.values.indexOf(c[s])&&(h=!0);d=h}else d=-1!==t.values.indexOf(i[r]+"");break;case"condition":if("null"!==t.type&&"notNull"!==t.type&&(void 0===o||""===o))return l;switch(t.type){case"eq":d=isNaN(i[r])||isNaN(o)?i[r]===o:Number(i[r])===Number(o);break;case"ne":d=isNaN(i[r])||isNaN(o)?i[r]!==o:Number(i[r])!==Number(o);break;case"gt":d=isNaN(i[r])||isNaN(o)?i[r]>o:Number(i[r])>Number(o);break;case"ge":d=isNaN(i[r])||isNaN(o)?i[r]>=o:Number(i[r])>=Number(o);break;case"lt":d=isNaN(i[r])||isNaN(o)?i[r]<o:Number(i[r])<Number(o);break;case"le":d=isNaN(i[r])||isNaN(o)?i[r]<=o:Number(i[r])<=Number(o);break;case"contain":d=-1!==(i[r]+"").indexOf(o);break;case"notContain":d=-1===(i[r]+"").indexOf(o);break;case"start":d=0===(i[r]+"").indexOf(o);break;case"end":var u=(i[r]+"").length-(o+"").length;d=0<=u&&(i[r]+"").lastIndexOf(o)===u;break;case"null":d=void 0===i[r]||""===i[r]||null===i[r];break;case"notNull":d=void 0!==i[r]&&""!==i[r]&&null!==i[r]}break;case"date":var f=new Date(Date.parse(i[r].replace(/-/g,"/")));switch(t.type){case"all":d=!0;break;case"yesterday":d=i[r]&&g(f,y()-86400,y()-1);break;case"thisWeek":d=i[r]&&g(f,p(),p()+604800-1);break;case"lastWeek":d=i[r]&&g(f,p()-604800,p()-1);break;case"thisMonth":d=i[r]&&g(f,x(),v());break;case"thisYear":d=i[r]&&g(f,new Date((new Date).getFullYear(),1,1)/1e3,new Date((new Date).getFullYear()+1,1,1)/1e3-1);break;case"specific":var b=f.getFullYear();b+="-"+m(f.getMonth()+1),b+="-"+m(f.getDate()),d=i[r]&&b===o}}function y(){return(new Date).setHours(0,0,0,0)/1e3}function p(){var e=new Date,t=e.getDay()||7;return new Date(e.setDate(e.getDate()-t+1)).setHours(0,0,0,0)/1e3}function x(){return new Date((new Date).setDate(1)).setHours(0,0,0,0)/1e3}function v(){var e=new Date,t=e.getMonth(),t=++t,t=new Date(e.getFullYear(),t,1);return t/1e3-1}function g(e,t,i){return e.getTime()/1e3>=t&&e.getTime()/1e3<=i}function m(e){return e=(e+="").length<=1?"0"+e:e}return n?l||d:l&&d}(l[a],t,r,i,0===a);i&&n.push(t)}),t.next().off("click"),table.reload(e.id,{data:n})),e.data=n},adaptTableHeight:function(a){var e=$(a.elem).next().children(".layui-table-tool"),t=e.children(".layui-table-tool-temp"),e=e.children(".layui-table-tool-self");let i=33,l=t.children(".layui-btn-container").html();null!=l&&""!=l.trim()||(i=-5),e.find('div[lay-event="LAYTABLE_COLS"]').css("top",i+"px"),tableOptions[a.id].isAdaptTableHeight||(tableOptions[a.id].isAdaptTableHeight=!0,_BODY.find(".cutMore, .seeMore").unbind("click"),_BODY.find(".cutMore, .seeMore").bind("click",function(){let e=$(this).attr("class"),t=10;-1!=e.indexOf("cutMore")?(_BODY.find(".criteria_im .layui-form-item").eq(5).nextAll().hide(),$(this).html('<i class="layui-icon layui-icon-triangle-d"></i>展开高级查询'),$(this).addClass("seeMore"),$(this).removeClass("cutMore")):(_BODY.find(".criteria_im .layui-form-item").eq(5).nextAll().show(),$(this).html('<i class="layui-icon act layui-icon-triangle-d"></i>收起高级查询'),$(this).addClass("cutMore"),$(this).removeClass("seeMore")),t+=_BODY.find("form:first").outerHeight()||0,t+=_BODY.find("#paging").outerHeight()||0;let i=table.getThisTableClass(a.id);i.fullHeightGap=t,i.resize(),$(this).attr("tableheight","full-"+t)}))},LocalCache:{set:function(e,t,i){layui.data(e,{key:t,value:mod.deepStringify(i)})},get:function(e,t){e=layui.data(e);return!!e[t]&&mod.deepParse(e[t])},del:function(e,t){layui.data(e,{key:t,remove:!0})},has:function(e,t){return!!layui.data(e)[t]}},SessionCache:{set:function(e,t,i){layui.sessionData(e,{key:t,value:mod.deepStringify(i)})},get:function(e,t){e=layui.sessionData(e);return!!e[t]&&mod.deepParse(e[t])},del:function(e,t){layui.sessionData(e,{key:t,remove:!0})},has:function(e,t){return!!layui.sessionData(e)[t]}}};exports("soulTable",mod)});